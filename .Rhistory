# 如果你有真实的 csv 字典，请这样读取：
ukb_dict_mini <- read.csv("app785362_20251022022121.dataset.data_dictionary.csv")
# 2. 保存到包的 data 目录
# 确保你当前工作目录在 xgUKB 文件夹下，或者已创建 ./data 文件夹
usethis::use_data(ukb_dict_mini, overwrite = TRUE)
# 2. 保存到包的 data 目录
# 确保你当前工作目录在 xgUKB 文件夹下，或者已创建 ./data 文件夹
usethis::use_data(ukb_dict_mini, overwrite = TRUE)
devtools::document()
devtools::check()
install.packages("rlang")
install.packages("rlang")
install.packages("rlang")
devtools::check()
# 安装
devtools::install_github("JerryHnuPKUPH/xgUKB")
# 安装
devtools::install_github("JerryHnuPKUPH/xgUKB")
# 使用
library(xgUKB)
# 1. 查变量
xg_find("BMI")
?xg_define_disease
??xgUKB
?xgUKB
?xg_extract
xg_extract(./file_path = "./app785362_20251022022121.dataset.data_dictionary.csv", "31")
xg_extract(file_path = "./app785362_20251022022121.dataset.data_dictionary.csv", "31")
xg_extract(file_path = "./app785362_20251022022121.dataset.data_dictionary.csv", "21001")
# 3. 定义疾病
# 假设提取的数据里包含了 p41270
my_data$is_CHD <- xg_define_disease(my_data, c("I25"))
# 2. 提取数据 (假设你有本地的大csv)
file <- "./app785362_20251022022121.dataset.data_dictionary.csv"
my_data <- xg_extract(file, field_ids = c("31", "21001"))
# 1. 查变量
xg_find("BMI")
library(dplyr)
# 1. 查变量
xg_find("BMI")
data("ukb_data_min")
data("ukb_data_mini")
data("UKB_data_mini")
ukb_dict_mini <- data.frame(
FieldID = c("21001-0.0", "31-0.0", "20116-0.0"),
Description = c("Body mass index (BMI)", "Sex", "Smoking status"),
Type = c("Continuous", "Categorical", "Categorical"),
stringsAsFactors = FALSE
)
View(ukb_dict_mini)
my_data <- xg_extract(ukb_dict_mini, field_ids = c("31-0.0", "20116-0.0"))
rm(list = ls())
# 1. 加载必要的库
library(readr)
library(dplyr)
library(usethis) # 专门用于管理R包数据的工具
# 2. 读取你的新 CSV 文件
# 假设你的 csv 文件就在项目根目录下
raw_data <- read_csv("UKBcoding.csv")
# 3. 数据清洗与重命名 (关键步骤！)
# 你的报错是因为缺少 "Description" 列，这里必须保证改对
ukb_dict_mini <- raw_data %>%
rename(
# 格式：新列名 = 旧列名
# 请根据你 CSV 里的实际列名修改下面这行
Description = Description,
FieldID = FieldID
) %>%
# 确保是数据框格式
as.data.frame()
# 4. 检查一下是否修改成功
print(head(ukb_dict_mini))
# 5. 将数据保存覆盖到 data 文件夹中
# 这行代码会自动把 ukb_dict_mini 变量保存为 data/ukb_dict_mini.rda
usethis::use_data(ukb_dict_mini, overwrite = TRUE)
# 使用
library(xgUKB)
# 1. 查变量
xg_find("BMI")
# 1. 查变量
xg_find("CCL6")
# 1. 查变量
xg_find("olink")
View(ukb_dict_mini)
# 1. 查变量
xg_find("GZMB")
setwd("~/BaiduSyncdisk/0_Ana/20251111_XGroup_UKBANK")
rm(list = ls())
# 1. 查变量
xg_find("GZMB")
# 使用
library(xgUKB)
library(dplyr)
# 1. 查变量
xg_find("GZMB")
# 1. 查变量
xg_find("BMI")
# 安装
devtools::install_github("JerryHnuPKUPH/xgUKB")
# 使用
library(xgUKB)
# 1. 查变量
xg_find("BMI")
# 1. 重新生成文档（如果有变动）
devtools::document()
# 2. 重新安装包到本地
devtools::install()
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("3"))
View(res)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("3","20116"))
View(res)
# 在 R Console 中运行
devtools::document()
devtools::install()
# 3. 立即测试
library(xgUKB)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("3","20116"))
View(res)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3_","p20116_"))
View(res)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3_"))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3"))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("3"))
View(res)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3"))
# 使用
library(xgUKB)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3"))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3"，"p20116"))
# 2. 提取数据 (假设你有本地的大csv)
file <- "./test.csv"  # 30GB的dataset
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3"，"p31"))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3","p31"))
View(res)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3","31"))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3","p20116"))
View(res)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("3","20116"))
print(head(res))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3_i0","p20116_i0"))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3_i0","p20116_i0"))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3","p20116"))
View(res)
devtools::install()
# 使用
library(xgUKB)
# 2. 提取数据 (假设你有本地的大csv)
file <- "./test.csv"  # 30GB的dataset
my_data <- xg_extract(file, field_ids = c("31", "20116"), instance = "0")
View(my_data)
my_data <- xg_extract(file, field_ids = c("3", "20116"), instance = "0")
View(my_data)
my_data <- xg_extract(file, field_ids = c("3", "20116"), instance = c("0","2"))
View(my_data)
# 1. 查变量
xg_find("BMI")
ukb_dict_mini
tail(ukb_dict_mini)
head(ukb_dict_mini)
devtools::install()
xg_find(keywords = "XPNPEP")
xg_find(keywords = "XPNPEP")
xg_find(keywords = "bmi")
xg_find(keywords = "Xpnpep")
xg_find(keywords = "kinase")
# 1. 查变量
xg_find("BMI")
# 1. 查变量
xg_find("Assessment centre")
# 1. 查变量
findID <- xg_find("Assessment centre")
id <- findID[,1]
View(findID)
id <- !duplicated(findID[,3])
id <- findID[!duplicated(findID[,3]),]
id <- findID[,!duplicated(3)]
View(id)
id <- unique(findID[,3])
my_data <- xg_extract(file, field_ids = id, instance = c("0","2"))
View(my_data)
View(findID)
# 1. 查变量
findID <- xg_find("BMI")
View(findID)
View(my_data)
View(findID)
# 1. 查变量
ID.find <-
xg_find("BMI")
# 1. 查变量
ID.find <- xg_find("BMI")
head(ID.find)
devtools::install()
devtools::install()
# 安装
devtools::install_github("JerryHnuPKUPH/xgUKB")
# 安装
devtools::install_github("JerryHnuPKUPH/xgUKB")
# 使用
library(xgUKB)
devtools::document()
git status
# add . 表示添加当前目录下所有变动的文件
git add .
devtools::document()
devtools::install()
rm(list = ls())
# 使用
library(xgUKB)
# 安装
devtools::install_github("JerryHnuPKUPH/xgUKB")
devtools::install()
# 安装
devtools::install_github("JerryHnuPKUPH/xgUKB")
# 使用
library(xgUKB)
# 1. 查变量
ID.find <- xg_find("BMI")
ids <- na.omit(unique(ID.find$FieldID))
# 2. 提取数据 (假设你有本地的大csv)
file <- "~/BaiduSyncdisk/0_Ana/20251111_XGroup_UKBANK/test.csv"  # 30GB的dataset
my_data <- xg_extract(file, field_ids = id, instance = c("0","2"))
my_data <- xg_extract(file, field_ids = ids, instance = c("0","2"))
View(my_data)
# 3. 定义疾病
# 假设提取的数据里包含了 p41270
my_data <- xg_rename(my_data, dict = ID.find)
View(my_data)
# 1. 查变量
ID.find <- xg_find("3","20116")
# 1. 查变量
ID.find <- xg_find("3","20116")
# 1. 查变量
ID.find <- xg_find("31","20116")
# 1. 查变量
ID.find <- xg_find("center")
View(ID.find)
ids <- na.omit(unique(ID.find$FieldID))
# 2. 提取数据 (假设你有本地的大csv)
file <- "~/BaiduSyncdisk/0_Ana/20251111_XGroup_UKBANK/test.csv"  # 30GB的dataset
my_data <- xg_extract(file, field_ids = ids, instance = c("0","2"))
View(my_data)
# 3. 定义疾病
# 假设提取的数据里包含了 p41270
my_data <- xg_rename(my_data, dict = ID.find)
View(my_data)
View(ID.find)
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract("test.csv", c("p3","p20116"))
# 现在你可以直接传文件路径了，引号必须加！
# 假设当前目录下有个叫 text_data.txt 的文件
res <- xg_extract(file, c("p3","p20116"))
View(res)
View(my_data)
View(ID.find)
View(my_data)
colnames(my_data)
# 重新加载
devtools::load_all(".") # 或者 install()
my_data <- xg_rename(my_data, dict = ID.find)
View(my_data)
# 1. 查变量
ID.find <- xg_find("center")
ids <- na.omit(unique(ID.find$FieldID))
# 2. 提取数据 (假设你有本地的大csv)
file <- "~/BaiduSyncdisk/0_Ana/20251111_XGroup_UKBANK/test.csv"  # 30GB的dataset
my_data <- xg_extract(file, field_ids = ids, instance = c("0","2"))
View(my_data)
# 3. 定义疾病
# 假设提取的数据里包含了 p41270
my_data <- xg_rename(my_data, dict = ID.find)
View(my_data)
colnames(my_data)
devtools::document()
devtools::install()
rm(list = ls())
# 使用
library(xgUKB)
# 1. 查变量
ID.find <- xg_find("center")
ids <- na.omit(unique(ID.find$FieldID))
# 2. 提取数据 (假设你有本地的大csv)
file <- "~/BaiduSyncdisk/0_Ana/20251111_XGroup_UKBANK/test.csv"  # 30GB的dataset
my_data <- xg_extract(file, field_ids = ids, instance = c("0","2"))
# 3. 定义疾病
# 假设提取的数据里包含了 p41270
my_data <- xg_rename(my_data, dict = ID.find)
View(my_data)
# 1. 查变量
ID.find <- xg_find(c("BMI","center"))
View(ID.find)
# 1. 查变量
ID.find <- xg_find("BMI","center")
devtools::install()
rm(list = ls())
# 使用
library(xgUKB)
# 1. 查变量
ID.find <- xg_find(c("BMI","center")) # ID.find <- xg_find("BMI|center")
